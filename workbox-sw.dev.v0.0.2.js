var WorkboxSW=function(){"use strict";class e{constructor(e){this._errors=e}createError(e,t){if(!(e in this._errors))throw Error(`Unable to generate error '${e}'.`);let r=this._errors[e].replace(/\s+/g," "),s=null;t&&(r+=` [${t.message}]`,s=t.stack);let i=Error();return i.name=e,i.message=r,i.stack=s,i}}var t=new e({"not-in-sw":"workbox-sw must be loaded in your service worker file.","unsupported-route-type":"Routes must be either a express style route string, a Regex to capture request URLs or a Route instance.","empty-express-string":"The Express style route string must have some characters, an empty string is invalid.","bad-revisioned-cache-list":"The 'precache()' method expectsan array of revisioned urls like so: ['/example/hello.1234.txt', {path: 'hello.txt', revision: '1234'}]","navigation-route-url-string":"The registerNavigationRoute() method expects a URL string as its first parameter.","bad-cache-id":"The 'cacheId' parameter must be a string with at least one character","bad-clients-claim":"The 'clientsClaim' parameter must be a boolean.","bad-directory-index":"The 'directoryIndex' parameter must be a boolean."});let r={"express-route-invalid-path":`When using ExpressRoute, you must
    provide a path that starts with a '/' character (to match same-origin
    requests) or that starts with 'http' (to match cross-origin requests)`};var s=new e(r),i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e,t){return e(t={exports:{}},t.exports),t.exports}var n=a(function(e,t){var r,s;s=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}var s=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],a=["fileName","functionName","source"],n=["args"];function o(e){if(e instanceof Object)for(var r=s.concat(i.concat(a.concat(n))),o=0;o<r.length;o++)e.hasOwnProperty(r[o])&&void 0!==e[r[o]]&&this["set"+t(r[o])](e[r[o]])}o.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof o)this.evalOrigin=e;else if(e instanceof Object)this.evalOrigin=new o(e);else throw TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var t=this.getFunctionName()||"{anonymous}",r="("+(this.getArgs()||[]).join(",")+")",s=this.getFileName()?"@"+this.getFileName():"",i=e(this.getLineNumber())?":"+this.getLineNumber():"",a=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+r+s+i+a}};for(var c=0;c<s.length;c++)o.prototype["get"+t(s[c])]=r(s[c]),o.prototype["set"+t(s[c])]=function(e){return function(t){this[e]=Boolean(t)}}(s[c]);for(var h=0;h<i.length;h++)o.prototype["get"+t(i[h])]=r(i[h]),o.prototype["set"+t(i[h])]=function(t){return function(r){if(!e(r))throw TypeError(t+" must be a Number");this[t]=Number(r)}}(i[h]);for(var u=0;u<a.length;u++)o.prototype["get"+t(a[u])]=r(a[u]),o.prototype["set"+t(a[u])]=function(e){return function(t){this[e]=String(t)}}(a[u]);return o},e.exports=s()}),o=a(function(e,t){var r,s;s=function e(t){var r=/(^|@)\S+\:\d+/,s=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function e(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(s))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw Error("Cannot parse given Error object")},extractLocation:function e(t){if(-1===t.indexOf(":"))return[t];var r=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(t.replace(/[\(\)]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function e(r){return r.stack.split("\n").filter(function(e){return!!e.match(s)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),s=this.extractLocation(r.pop()),i=r.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(s[0])>-1?void 0:s[0];return new t({functionName:i,fileName:a,lineNumber:s[1],columnNumber:s[2],source:e})},this)},parseFFOrSafari:function e(r){return r.stack.split("\n").filter(function(e){return!e.match(i)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t({functionName:e});var r=e.split("@"),s=this.extractLocation(r.pop()),i=r.join("@")||void 0;return new t({functionName:i,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:e})},this)},parseOpera:function e(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function e(r){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,i=r.message.split("\n"),a=[],n=2,o=i.length;n<o;n+=2){var c=s.exec(i[n]);c&&a.push(new t({fileName:c[2],lineNumber:c[1],source:i[n]}))}return a},parseOpera10:function e(r){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=r.stacktrace.split("\n"),a=[],n=0,o=i.length;n<o;n+=2){var c=s.exec(i[n]);c&&a.push(new t({functionName:c[3]||void 0,fileName:c[2],lineNumber:c[1],source:i[n]}))}return a},parseOpera11:function e(s){return s.stack.split("\n").filter(function(e){return!!e.match(r)&&!e.match(/^Error created at/)},this).map(function(e){var r,s=e.split("@"),i=this.extractLocation(s.pop()),a=s.shift()||"",n=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(r=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var o=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t({functionName:n,args:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})},this)}}},e.exports=s(n)});function c(e){e=e.replace(/\s+/g," ");let t=Error(e);t.name="assertion-failed";let r=o.parse(t);throw r.length>=3&&(t.message=`Invalid call to ${r[2].functionName}() â€” `+e),t}var h={atLeastOne:function e(t){let r=Object.keys(t);r.some(e=>void 0!==t[e])||c("Please set at least one of the following parameters: "+r.map(e=>`'${e}'`).join(", "))},hasMethod:function e(t,r){let s=Object.keys(t).pop(),i=typeof t[s][r];"function"!==i&&c(`The '${s}' parameter must be an object that exposes a
      '${r}' method.`)},isInstance:function e(t,r){let s=Object.keys(t).pop();t[s]instanceof r||c(`The '${s}' parameter must be an instance of
      '${r.name}'`)},isOneOf:function e(t,r){let s=Object.keys(t).pop();r.includes(t[s])||c(`The '${s}' parameter must be set to one of the
      following: ${r}`)},isType:function e(t,r){let s=Object.keys(t).pop(),i=typeof t[s];i!==r&&c(`The '${s}' parameter has the wrong type. (Expected:
      ${r}, actual: ${i})`)},isValue:function e(t,r){let s=Object.keys(t).pop(),i=t[s];i!==r&&c(`The '${s}' parameter has the wrong value. (Expected: 
      ${r}, actual: ${i})`)},isArrayOfType:function e(t,r){let s=Object.keys(t).pop(),i=`The '${s}' parameter should be an array containing
    one or more '${r}' elements.`;for(let a of(Array.isArray(t[s])||c(i),t[s]))typeof a!==r&&c(i)},isArrayOfClass:function e(t,r){let s=Object.keys(t).pop(),i=`The '${s}' parameter should be an array containing
    one or more '${r.name}' instances.`;for(let a of(Array.isArray(t[s])||c(i),t[s]))a instanceof r||c(i)}};function u(e){return"object"==typeof e?(h.hasMethod({handler:e},"handle"),e):(h.isType({handler:e},"function"),{handle:e})}class l{constructor({match:e,handler:t,method:r}={}){this.handler=u(t),h.isType({match:e},"function"),this.match=e,r?(h.isOneOf({method:r},["DELETE","GET","HEAD","POST","PUT",]),this.method=r):this.method="GET"}}var p=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},d=function e(t,r,s){var i,a,n;return(p(r)||(s=r||s,r=[]),s=s||{},t instanceof RegExp)?function e(t,r){var s=t.source.match(/\((?!\?)/g);if(s)for(var i=0;i<s.length;i++)r.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return x(t,r)}(t,r):p(t)?function t(r,s,i){for(var a=[],n=0;n<r.length;n++)a.push(e(r[n],s,i).source);var o=RegExp("(?:"+a.join("|")+")",E(i));return x(o,s)}(t,r,s):(i=t,a=r,$(f(i,n=s),a,n))},g=RegExp("(\\\\.)|([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))","g");function f(e,t){for(var r,s=[],i=0,a=0,n="",o=t&&t.delimiter||"/";null!=(r=g.exec(e));){var c=r[0],h=r[1],u=r.index;if(n+=e.slice(a,u),a=u+c.length,h){n+=h[1];continue}var l=e[a],p=r[2],d=r[3],f=r[4],m=r[5],y=r[6],w=r[7];n&&(s.push(n),n="");var x=null!=p&&null!=l&&l!==p,E="+"===y||"*"===y,$="?"===y||"*"===y,C=r[2]||o,T=f||m;s.push({name:d||i++,prefix:p||"",delimiter:C,optional:$,repeat:E,partial:x,asterisk:!!w,pattern:T?b(T):w?".*":"[^"+v(C)+"]+?"})}return a<e.length&&(n+=e.substr(a)),n&&s.push(n),s}function m(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function y(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function w(e){for(var t=Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=RegExp("^(?:"+e[r].pattern+")$"));return function(r,s){for(var i="",a=r||{},n=(s||{}).pretty?m:encodeURIComponent,o=0;o<e.length;o++){var c,h=e[o];if("string"==typeof h){i+=h;continue}var u=a[h.name];if(null==u){if(h.optional){h.partial&&(i+=h.prefix);continue}throw TypeError('Expected "'+h.name+'" to be defined')}if(p(u)){if(!h.repeat)throw TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(h.optional)continue;throw TypeError('Expected "'+h.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(c=n(u[l]),!t[o].test(c))throw TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===l?h.prefix:h.delimiter)+c}continue}if(c=h.asterisk?y(u):n(u),!t[o].test(c))throw TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+c+'"');i+=h.prefix+c}return i}}function v(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function b(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function x(e,t){return e.keys=t,e}function E(e){return e.sensitive?"":"i"}function $(e,t,r){p(t)||(r=t||r,t=[]);for(var s=(r=r||{}).strict,i=!1!==r.end,a="",n=0;n<e.length;n++){var o=e[n];if("string"==typeof o)a+=v(o);else{var c=v(o.prefix),h="(?:"+o.pattern+")";t.push(o),o.repeat&&(h+="(?:"+c+h+")*"),a+=h=o.optional?o.partial?c+"("+h+")?":"(?:"+c+"("+h+"))?":c+"("+h+")"}}var u=v(r.delimiter||"/"),l=a.slice(-u.length)===u;return s||(a=(l?a.slice(0,-u.length):a)+"(?:"+u+"(?=$))?"),i?a+="$":a+=s&&l?"":"(?="+u+"|$)",x(RegExp("^"+a,E(r)),t)}d.parse=f,d.compile=function e(t,r){return w(f(t,r))},d.tokensToFunction=w,d.tokensToRegExp=$;class C extends l{constructor({path:e,handler:t,method:r}){if(!(e.startsWith("/")||e.startsWith("http")))throw s.createError("express-route-invalid-path");let i=[],a=d(e,i),n=({url:t})=>{if(e.startsWith("/")&&t.origin!==location.origin)return null;let r=e.startsWith("/")?t.pathname:t.href,s=r.match(a);if(!s)return null;let n={};return i.forEach((e,t)=>{n[e.name]=s[t+1]}),n};super({match:n,handler:t,method:r})}}class T{constructor({title:e,isPrimary:t}={}){this._isPrimary=t||!1,this._groupTitle=e||"",this._logs=[],this._childGroups=[],this._isFirefox=!1,/Firefox\/\d*\.\d*/.exec(navigator.userAgent)&&(this._isFirefox=!0),this._isEdge=!1,/Edge\/\d*\.\d*/.exec(navigator.userAgent)&&(this._isEdge=!0)}addLog(e){this._logs.push(e)}addChildGroup(e){0!==e._logs.length&&this._childGroups.push(e)}print(){if(this._isEdge){this._printEdgeFriendly();return}this._openGroup(),this._logs.forEach(e=>{this._printLogDetails(e)}),this._childGroups.forEach(e=>{e.print()}),this._closeGroup()}_printEdgeFriendly(){this._logs.forEach((e,t)=>{let r=e.message;"string"==typeof r&&(r=r.replace(/%c/g,""));let s=[r];e.error&&s.push(e.error),e.args&&s.push(e.args);let i=e.logFunc||console.log;i(...s)}),this._childGroups.forEach((e,t)=>{e.print()})}_printLogDetails(e){let t=e.logFunc?e.logFunc:console.log,r=[e.message];e.colors&&!this._isEdge&&(r=r.concat(e.colors)),e.args&&(r=r.concat(e.args)),t(...r)}_openGroup(){if(this._isPrimary){if(0===this._childGroups.length)return;let e=this._logs.shift();if(this._isFirefox){this._printLogDetails(e);return}e.logFunc=console.group,this._printLogDetails(e)}else console.groupCollapsed(this._groupTitle)}_closeGroup(){(!this._isPrimary||0!==this._childGroups.length)&&console.groupEnd()}}function L(){return!0}var k={isDevBuild:L,isLocalhost:function e(){return Boolean("localhost"===location.hostname||"[::1]"===location.hostname||location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},isServiceWorkerGlobalScope:function e(){return"ServiceWorkerGlobalScope"in self&&self instanceof ServiceWorkerGlobalScope}};self.goog=self.goog||{},self.goog.LOG_LEVEL=self.goog.LOG_LEVEL||{none:-1,verbose:0,debug:1,warn:2,error:3};let N="#bdc3c7";var q=new class e{constructor(){this._defaultLogLevel=k.isDevBuild()?self.goog.LOG_LEVEL.debug:self.goog.LOG_LEVEL.warn}log(e){this._printMessage(self.goog.LOG_LEVEL.verbose,e)}debug(e){this._printMessage(self.goog.LOG_LEVEL.debug,e)}warn(e){this._printMessage(self.goog.LOG_LEVEL.warn,e)}error(e){this._printMessage(self.goog.LOG_LEVEL.error,e)}_printMessage(e,t){if(!this._shouldLogMessage(e,t))return;let r=this._getAllLogGroups(e,t);r.print()}_getAllLogGroups(e,t){let r=new T({isPrimary:!0,title:"workbox log."}),s=this._getPrimaryMessageDetails(e,t);if(r.addLog(s),t.error){let i={message:t.error,logFunc:console.error};r.addLog(i)}let a=new T({title:"Extra Information."});if(t.that&&t.that.constructor&&t.that.constructor.name){let n=t.that.constructor.name;a.addLog(this._getKeyValueDetails("class",n))}return t.data&&("object"!=typeof t.data||t.data instanceof Array?a.addLog(this._getKeyValueDetails("additionalData",t.data)):Object.keys(t.data).forEach(e=>{a.addLog(this._getKeyValueDetails(e,t.data[e]))})),r.addChildGroup(a),r}_getKeyValueDetails(e,t){return{message:`%c${e}: `,colors:["color: #3498db"],args:t}}_getPrimaryMessageDetails(e,t){let r,s;switch(e){case self.goog.LOG_LEVEL.verbose:r="Info",s=N;break;case self.goog.LOG_LEVEL.debug:r="Debug",s="#2ecc71";break;case self.goog.LOG_LEVEL.warn:r="Warn",s="#f1c40f";break;case self.goog.LOG_LEVEL.error:r="Error",s="#e74c3c"}let i=`%cðŸ”§ %c[${r}]`,a=[`color: ${N}`,`color: ${s}`,],n;return"string"==typeof t?n=t:t.message&&(n=t.message),n&&(i+=`%c ${n=n.replace(/\s+/g," ")}`,a.push("color: #7f8c8d; font-weight: normal")),{message:i,colors:a}}_shouldLogMessage(e,t){if(!t)return!1;let r=this._defaultLogLevel;return self&&self.goog&&"number"==typeof self.goog.logLevel&&(r=self.goog.logLevel),r!==self.goog.LOG_LEVEL.none&&!(e<r)}};class O extends l{constructor({whitelist:e,blacklist:t,handler:r}={}){h.isArrayOfClass({whitelist:e},RegExp),t?h.isArrayOfClass({blacklist:t},RegExp):t=[];let s=({event:s,url:i})=>{let a=!1,n;return"navigate"===s.request.mode&&(e.some(e=>e.test(i.pathname))?t.some(e=>e.test(i.pathname))?n="The navigation route is not being used, since the request URL matches both the whitelist and blacklist.":(n="The navigation route is being used.",a=!0):n="The navigation route is not being used, since the URL being navigated to doesn't match the whitelist.",q.debug({that:this,message:n,data:{"request-url":i.href,whitelist:e,blacklist:t,handler:r}})),a};super({match:s,handler:r,method:"GET"})}}class _ extends l{constructor({regExp:e,handler:t,method:r}){h.isInstance({regExp:e},RegExp);let s=({url:t})=>{let r=e.exec(t.href);return r?t.origin!==location.origin&&0!==r.index?(q.debug({that:this,message:"Skipping route, because the RegExp match didn't occur at the start of the URL.",data:{url:t.href,regExp:e}}),null):r.slice(1):null};super({match:s,handler:t,method:r})}}class S{constructor({handleFetch:e}={}){void 0===e&&(e=!0),this._routes=new Map,e&&this._addFetchListener()}_addFetchListener(){self.addEventListener("fetch",e=>{let t=new URL(e.request.url);if(!t.protocol.startsWith("http")){q.log({that:this,message:"URL does not start with HTTP and so not passing through the router.",data:{request:e.request}});return}let r,s;for(let i of this._routes.get(e.request.method)||[]){let a=i.match({url:t,event:e});if(a){s=i,q.log({that:this,message:"The router found a matching route.",data:{route:s,request:e.request}});let n=a;Array.isArray(n)&&0===n.length?n=void 0:n.constructor===Object&&0===Object.keys(n).length&&(n=void 0),r=i.handler.handle({url:t,event:e,params:n});break}}!r&&this.defaultHandler&&(r=this.defaultHandler.handle({url:t,event:e})),r&&this.catchHandler&&(r=r.catch(r=>this.catchHandler.handle({url:t,event:e,error:r}))),r&&e.respondWith(r.then(t=>(q.debug({that:this,message:"The router is managing a route with a response.",data:{route:s,request:e.request,response:t}}),t)))})}setDefaultHandler({handler:e}={}){this.defaultHandler=u(e)}setCatchHandler({handler:e}={}){this.catchHandler=u(e)}registerRoutes({routes:e}={}){for(let t of(h.isArrayOfClass({routes:e},l),e))this._routes.has(t.method)||this._routes.set(t.method,[]),this._routes.get(t.method).unshift(t)}registerRoute({route:e}={}){h.isInstance({route:e},l),this.registerRoutes({routes:[e]})}}var D=new e({"multiple-cache-will-update-plugins":"You cannot register more than one plugin that implements cacheWillUpdate.","multiple-cache-will-match-plugins":"You cannot register more than one plugin that implements cacheWillMatch.","invalid-response-for-caching":"The fetched response could not be cached due to an invalid response code.","no-response-received":"No response received; falling back to cache.","bad-cache-id":"The 'cacheId' parameter must be a string with at least one character."});class I{constructor({statuses:e,headers:t}={}){h.atLeastOne({statuses:e,headers:t}),void 0!==e&&h.isArrayOfType({statuses:e},"number"),void 0!==t&&h.isType({headers:t},"object"),this.statuses=e,this.headers=t}isResponseCacheable({request:e,response:t}={}){h.isInstance({response:t},Response);let r=!0;if(this.statuses&&(r=this.statuses.includes(t.status)),this.headers&&r&&(r=Object.keys(this.headers).some(e=>t.headers.get(e)===this.headers[e])),!r){let s={response:t};this.statuses&&(s["valid-status-codes"]=JSON.stringify(this.statuses)),this.headers&&(s["valid-headers"]=JSON.stringify(this.headers)),e&&(s.request=e),q.debug({message:`The response does not meet the criteria for being added to the
          cache.`,data:s})}return r}}class A extends I{cacheWillUpdate({request:e,response:t}={}){return this.isResponseCacheable({request:e,response:t})}}let R=({cacheId:e}={})=>{let t="workbox-runtime-caching";return e&&(t=`${e}-${t}`),self&&self.registration&&(t+=`-${self.registration.scope}`),t},W=["cacheDidUpdate","cacheWillMatch","cacheWillUpdate","fetchDidFail","requestWillFetch",];var U=({response:e})=>{h.isInstance({response:e},Response);let t=e.clone(),r="body"in t?Promise.resolve(t.body):t.blob();return r.then(e=>new Response(e,{headers:t.headers,status:t.status,statusText:t.statusText}))};class F{constructor({cacheName:e,cacheId:t,plugins:r,fetchOptions:s,matchOptions:i}={}){if(t&&("string"!=typeof t||0===t.length))throw D.createError("bad-cache-id");e?(h.isType({cacheName:e},"string"),this.cacheName=e,t&&(this.cacheName=`${t}-${this.cacheName}`)):this.cacheName=R({cacheId:t}),s&&(h.isType({fetchOptions:s},"object"),this.fetchOptions=s),i&&(h.isType({matchOptions:i},"object"),this.matchOptions=i),this.plugins=new Map,r&&(h.isArrayOfType({plugins:r},"object"),r.forEach(e=>{for(let t of W)if("function"==typeof e[t]){if(this.plugins.has(t)){if("cacheWillUpdate"===t)throw D.createError("multiple-cache-will-update-plugins");if("cacheWillMatch"===t)throw D.createError("multiple-cache-will-match-plugins")}else this.plugins.set(t,[]);this.plugins.get(t).push(e)}})),this.plugins.has("cacheWillUpdate")&&(this._userSpecifiedCachableResponsePlugin=this.plugins.get("cacheWillUpdate")[0])}getDefaultCacheableResponsePlugin(){return this._defaultCacheableResponsePlugin||(this._defaultCacheableResponsePlugin=new A({statuses:[200]})),this._defaultCacheableResponsePlugin}async getCache(){return this._cache||(this._cache=await caches.open(this.cacheName)),this._cache}async match({request:e}){h.atLeastOne({request:e});let t=await this.getCache(),r=await t.match(e,this.matchOptions);if(this.plugins.has("cacheWillMatch")){let s=this.plugins.get("cacheWillMatch")[0];r=s.cacheWillMatch({request:e,cache:t,cachedResponse:r,matchOptions:this.matchOptions})}return r}async fetch({request:e}){"string"==typeof e?e=new Request(e):h.isInstance({request:e},Request);let t=this.plugins.has("fetchDidFail")?e.clone():null;if(this.plugins.has("requestWillFetch"))for(let r of this.plugins.get("requestWillFetch")){let s=r.requestWillFetch({request:e});h.isInstance({returnedPromise:s},Promise);let i=await s;h.isInstance({returnedRequest:i},Request),e=i}try{return await fetch(e,this.fetchOptions)}catch(a){if(this.plugins.has("fetchDidFail"))for(let n of this.plugins.get("fetchDidFail"))n.fetchDidFail({request:t.clone()});throw a}}async fetchAndCache({request:e,waitOnCache:t,cacheKey:r,cacheResponsePlugin:s,cleanRedirects:i}){h.atLeastOne({request:e});let a,n=await this.fetch({request:e}),o=this._userSpecifiedCachableResponsePlugin||s||this.getDefaultCacheableResponsePlugin(),c=o.cacheWillUpdate({request:e,response:n});if(c){let u=i&&n.redirected?await U({response:n}):n.clone();a=this.getCache().then(async t=>{let s,i=r||e;if("opaque"!==n.type&&this.plugins.has("cacheDidUpdate")&&(s=await this.match({request:i})),await t.put(i,u),this.plugins.has("cacheDidUpdate"))for(let a of this.plugins.get("cacheDidUpdate"))await a.cacheDidUpdate({cacheName:this.cacheName,oldResponse:s,newResponse:u,url:"url"in i?i.url:i})})}else if(!c&&t)throw D.createError("invalid-response-for-caching");return t&&a&&await a,n}}class P{constructor({requestWrapper:e,waitOnCache:t}={}){e?this.requestWrapper=e:this.requestWrapper=new F,this.waitOnCache=Boolean(t)}handle({event:e,params:t}={}){throw Error("This abstract method must be implemented in a subclass.")}}class M extends P{async handle({event:e}={}){h.isInstance({event:e},FetchEvent);let t=await this.requestWrapper.match({request:e.request});return t||await this.requestWrapper.fetchAndCache({request:e.request,waitOnCache:this.waitOnCache})}}class j extends P{async handle({event:e}={}){return h.isInstance({event:e},FetchEvent),await this.requestWrapper.match({request:e.request})}}class G extends P{constructor(e={}){super(e),this._cacheablePlugin=new A({statuses:[0,200]});let{networkTimeoutSeconds:t}=e;t&&(h.isType({networkTimeoutSeconds:t},"number"),this.networkTimeoutSeconds=t)}async handle({event:e}={}){h.isInstance({event:e},FetchEvent);let t=[],r;this.networkTimeoutSeconds&&t.push(new Promise(t=>{r=setTimeout(()=>{t(this.requestWrapper.match({request:e.request}))},1e3*this.networkTimeoutSeconds)}));let s=this.requestWrapper.fetchAndCache({request:e.request,waitOnCache:this.waitOnCache,cacheResponsePlugin:this._cacheablePlugin}).then(e=>(r&&clearTimeout(r),e||Promise.reject(D.createError("no-response-received")))).catch(()=>this.requestWrapper.match({request:e.request}));return t.push(s),Promise.race(t)}}class V extends P{async handle({event:e}={}){return h.isInstance({event:e},FetchEvent),await this.requestWrapper.fetch({request:e.request})}}class B extends P{constructor(e={}){super(e),this._cacheablePlugin=new A({statuses:[0,200]})}async handle({event:e}={}){h.isInstance({event:e},FetchEvent);let t=this.requestWrapper.fetchAndCache({request:e.request,waitOnCache:this.waitOnCache,cacheResponsePlugin:this._cacheablePlugin}).catch(()=>Response.error()),r=await this.requestWrapper.match({request:e.request});return r||await t}}let H="workbox-cache-expiration";self&&self.registration&&(H+=`-${self.registration.scope}`);let K=H,z="timestamp";var Y=a(function(e){!function(){function t(e){return new Promise(function(t,r){e.onsuccess=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function r(e,r,s){var i,a=new Promise(function(a,n){i=e[r].apply(e,s),t(i).then(a,n)});return a.request=i,a}function s(e,t,r){r.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(e){this[t][r]=e}})})}function i(e,t,s,i){i.forEach(function(i){i in s.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function a(e,t,r,s){s.forEach(function(s){s in r.prototype&&(e.prototype[s]=function(){return this[t][s].apply(this[t],arguments)})})}function n(e,t,s,i){i.forEach(function(i){i in s.prototype&&(e.prototype[i]=function(){var e,s,a,n;return e=this[t],s=i,a=arguments,(n=r(e,s,a)).then(function(e){if(e)return new c(e,n.request)})})})}function o(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function u(e){this._tx=e,this.complete=new Promise(function(t,r){e.oncomplete=function(){t()},e.onerror=function(){r(e.error)},e.onabort=function(){r(e.error)}})}function l(e,t,r){this._db=e,this.oldVersion=t,this.transaction=new u(r)}function p(e){this._db=e}s(o,"_index",["name","keyPath","multiEntry","unique"]),i(o,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),n(o,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(c,"_cursor",["direction","key","primaryKey","value"]),i(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var r=this,s=arguments;return Promise.resolve().then(function(){return r._cursor[e].apply(r._cursor,s),t(r._request).then(function(e){if(e)return new c(e,r._request)})})})}),h.prototype.createIndex=function(){return new o(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new o(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),i(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),n(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),u.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(u,"_tx",["objectStoreNames","mode"]),a(u,"_tx",IDBTransaction,["abort"]),l.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(l,"_db",["name","version","objectStoreNames"]),a(l,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new u(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,o].forEach(function(t){t.prototype[e.replace("open","iterate")]=function(){var t,r=(t=arguments,Array.prototype.slice.call(t)),s=r[r.length-1],i=this._store||this._index,a=i[e].apply(i,r.slice(0,-1));a.onsuccess=function(){s(a.result)}}})}),[o,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var r=this,s=[];return new Promise(function(i){r.iterateCursor(e,function(e){if(!e||(s.push(e.value),void 0!==t&&s.length==t)){i(s);return}e.continue()})})})}),e.exports={open:function(e,t,s){var i=r(indexedDB,"open",[e,t]),a=i.request;return a.onupgradeneeded=function(e){s&&s(new l(a.result,e.oldVersion,a.transaction))},i.then(function(e){return new p(e)})},delete:function(e){return r(indexedDB,"deleteDatabase",[e])}},e.exports.default=e.exports}()});let J={"max-entries-or-age-required":`Either the maxEntries or maxAgeSeconds
    parameters (or both) are required when constructing Plugin.`,"max-entries-must-be-number":`The maxEntries parameter to the Plugin
    constructor must either be a number or undefined.`,"max-age-seconds-must-be-number":`The maxAgeSeconds parameter to the Plugin
    constructor must either be a number or undefined.`};var Q=new e(J);class X{constructor({maxEntries:e,maxAgeSeconds:t}={}){if(!(e||t))throw Q.createError("max-entries-or-age-required");if(e&&"number"!=typeof e)throw Q.createError("max-entries-must-be-number");if(t&&"number"!=typeof t)throw Q.createError("max-age-seconds-must-be-number");this.maxEntries=e,this.maxAgeSeconds=t,this._dbs=new Map,this._caches=new Map,this._expirationMutex=!1,this._timestampForNextRun=null}async getDB({cacheName:e}={}){h.isType({cacheName:e},"string");let t=`${K}-${e}`;if(!this._dbs.has(t)){let r=await Y.open(t,1,t=>{let r=t.createObjectStore(e,{keyPath:"url"});r.createIndex(z,z,{unique:!1})});this._dbs.set(t,r)}return this._dbs.get(t)}async getCache({cacheName:e}={}){if(h.isType({cacheName:e},"string"),!this._caches.has(e)){let t=await caches.open(e);this._caches.set(e,t)}return this._caches.get(e)}isResponseFresh({cachedResponse:e,now:t}={}){if(e&&this.maxAgeSeconds){h.isInstance({cachedResponse:e},Response);let r=e.headers.get("date");if(r){void 0===t&&(t=Date.now());let s=new Date(r);if(s.getTime()+1e3*this.maxAgeSeconds<t)return!1}}return!0}async updateTimestamp({cacheName:e,url:t,now:r}={}){h.isType({url:t},"string"),h.isType({cacheName:e},"string"),void 0===r&&(r=Date.now());let s=await this.getDB({cacheName:e}),i=s.transaction(e,"readwrite");i.objectStore(e).put({[z]:r,url:t}),await i.complete}async expireEntries({cacheName:e,now:t}={}){if(this._expirationMutex){this._timestampForNextRun=t;return}this._expirationMutex=!0,h.isType({cacheName:e},"string"),void 0===t&&(t=Date.now());let r=this.maxAgeSeconds?await this.findOldEntries({cacheName:e,now:t}):[],s=this.maxEntries?await this.findExtraEntries({cacheName:e}):[],i=[...new Set(r.concat(s))];if(await this.deleteFromCacheAndIDB({cacheName:e,urls:i}),i.length>0&&q.debug({that:this,message:"Expired entries have been removed from the cache.",data:{cacheName:e,urls:i}}),this._expirationMutex=!1,this._timestampForNextRun){let a=this._timestampForNextRun;return this._timestampForNextRun=null,this.expireEntries({cacheName:e,now:a})}}async findOldEntries({cacheName:e,now:t}={}){h.isType({cacheName:e},"string"),h.isType({now:t},"number");let r=t-1e3*this.maxAgeSeconds,s=[],i=await this.getDB({cacheName:e}),a=i.transaction(e,"readonly"),n=a.objectStore(e),o=n.index(z);return o.iterateCursor(e=>{e&&(e.value[z]<r&&s.push(e.value.url),e.continue())}),await a.complete,s}async findExtraEntries({cacheName:e}={}){h.isType({cacheName:e},"string");let t=[],r=await this.getDB({cacheName:e}),s=r.transaction(e,"readonly"),i=s.objectStore(e),a=i.index(z),n=await a.count();return n>this.maxEntries&&(a=(i=(s=r.transaction(e,"readonly")).objectStore(e)).index(z)).iterateCursor(e=>{e&&(t.push(e.value.url),n-t.length>this.maxEntries&&e.continue())}),await s.complete,t}async deleteFromCacheAndIDB({cacheName:e,urls:t}={}){if(h.isType({cacheName:e},"string"),h.isArrayOfType({urls:t},"string"),t.length>0){let r=await this.getCache({cacheName:e}),s=await this.getDB({cacheName:e});for(let i of t){await r.delete(i);let a=s.transaction(e,"readwrite"),n=a.objectStore(e);n.delete(i),await a.complete}}}}class Z extends X{cacheWillMatch({cachedResponse:e,now:t}={}){return this.isResponseFresh({cachedResponse:e,now:t})?e:null}async cacheDidUpdate({cacheName:e,newResponse:t,url:r,now:s}={}){h.isType({cacheName:e},"string"),h.isInstance({newResponse:t},Response),void 0===s&&(s=Date.now()),await this.updateTimestamp({cacheName:e,url:r,now:s}),await this.expireEntries({cacheName:e,now:s})}}let ee={"channel-name-required":`The channelName parameter is required when
    constructing a new BroadcastCacheUpdate instance.`,"responses-are-same-parameters-required":`The first, second, and
    headersToCheck parameters must be valid when calling responsesAreSame()`};var et=new e(ee);class er{constructor({channelName:e,headersToCheck:t,source:r}={}){if("string"!=typeof e||0===e.length)throw et.createError("channel-name-required");this.channelName=e,this.headersToCheck=t||["content-length","etag","last-modified",],this.source=r||"workbox-broadcast-cache-update"}get channel(){return this._channel||(this._channel=new BroadcastChannel(this.channelName)),this._channel}notifyIfUpdated({first:e,second:t,cacheName:r,url:s}){h.isType({cacheName:r},"string"),!function e({first:t,second:r,headersToCheck:s}={}){if(!(t instanceof Response&&r instanceof Response&&s instanceof Array))throw et.createError("responses-are-same-parameters-required");let i=s.some(e=>t.headers.has(e)&&r.headers.has(e));return i?s.every(e=>t.headers.has(e)===r.headers.has(e)&&t.headers.get(e)===r.headers.get(e)):(q.log({message:`Unable to determine whether the response has been updated
        because none of the headers that would be checked are present.`,data:{"First Response":t,"Second Response":r,"Headers To Check":JSON.stringify(s)}}),!0)}({first:e,second:t,headersToCheck:this.headersToCheck})&&function e({channel:t,cacheName:r,url:s,source:i}){h.isInstance({channel:t},BroadcastChannel),h.isType({cacheName:r},"string"),h.isType({source:i},"string"),h.isType({url:s},"string"),t.postMessage({type:"CACHE_UPDATED",meta:i,payload:{cacheName:r,updatedUrl:s}})}({cacheName:r,url:s,channel:this.channel,source:this.source})}}class es extends er{cacheDidUpdate({cacheName:e,oldResponse:t,newResponse:r,url:s}){h.isType({cacheName:e},"string"),h.isInstance({newResponse:r},Response),t&&this.notifyIfUpdated({cacheName:e,first:t,second:r,url:s})}}var ei=new e({"not-in-sw":"workbox-precaching must be loaded in your service worker file.","invalid-revisioned-entry":"File manifest entries must be either a string with revision info in the url or an object with a 'url' and 'revision' parameters.","invalid-unrevisioned-entry":"","bad-cache-bust":"The cache bust parameter must be a boolean.","duplicate-entry-diff-revisions":"An attempt was made to cache the same url twice with each having different revisions. This is not supported.","request-not-cached":"A request failed the criteria to be cached. By default, only responses with 'response.ok = true' are cached.","should-override":"Method should be overridden by the extending class.","bad-cache-id":"The 'cacheId' parameter must be a string with at least one character."});class ea{constructor({cacheName:e,cacheId:t,plugins:r}={}){if(t&&("string"!=typeof t||0===t.length))throw ei.createError("bad-cache-id");this._entriesToCache=new Map,this._requestWrapper=new F({cacheName:e,cacheId:t,plugins:r,fetchOptions:{credentials:"same-origin"}})}_addEntries(e){this._parsedCacheUrls=null,e.forEach(e=>{this._addEntryToInstallList(this._parseEntry(e))})}getCacheName(){return this._requestWrapper.cacheName}getCachedUrls(){return this._parsedCacheUrls||(this._parsedCacheUrls=Array.from(this._entriesToCache.keys()).map(e=>new URL(e,location).href)),this._parsedCacheUrls}_addEntryToInstallList(e){let t=e.entryID,r=this._entriesToCache.get(e.entryID);if(!r){this._entriesToCache.set(t,e);return}this._onDuplicateInstallEntryFound(e,r)}async install(){if(0===this._entriesToCache.size)return;let e=[];return this._entriesToCache.forEach(t=>{e.push(this._cacheEntry(t))}),Promise.all(e)}async _cacheEntry(e){let t=await this._isAlreadyCached(e);if(!t)try{return await this._requestWrapper.fetchAndCache({request:e.getNetworkRequest(),waitOnCache:!0,cacheKey:e.request,cleanRedirects:!0}),this._onEntryCached(e)}catch(r){throw ei.createError("request-not-cached",{message:`Failed to get a cacheable response for '${e.request.url}': ${r.message}`})}}async cleanup(){if(!await caches.has(this.getCacheName()))return;let e=[];this._entriesToCache.forEach(t=>{e.push(t.request.url)});let t=await this._getCache(),r=await t.keys(),s=r.filter(t=>!e.includes(t.url));return Promise.all(s.map(e=>t.delete(e)))}async _getCache(){return this._cache||(this._cache=await caches.open(this.getCacheName())),this._cache}_parseEntry(e){throw ei.createError("should-override")}_onDuplicateEntryFound(e,t){throw ei.createError("should-override")}_isAlreadyCached(e){throw ei.createError("should-override")}_onEntryCached(e){throw ei.createError("should-override")}}let en="workbox-precaching-revisioned-v1";self&&self.registration&&(en+=`-${self.registration.scope}`);let eo=en;class ec{constructor({entryID:e,revision:t,request:r,cacheBust:s}){this.entryID=e,this.revision=t,this.request=r,this.cacheBust=s}getNetworkRequest(){if(!0!==this.cacheBust)return this.request;let e=this.request.url,t={};if(!0===this.cacheBust){if("cache"in Request.prototype)t.cache="reload";else{let r=new URL(e,location);r.search+=(r.search?"&":"")+encodeURIComponent("_workbox-precaching")+"="+encodeURIComponent(this.revision),e=r.toString()}}return new Request(e,t)}}class eh extends ec{constructor(e){if(h.isType({url:e},"string"),0===e.length)throw ei.createError("invalid-revisioned-entry",Error("Bad url Parameter. It should be a string:"+JSON.stringify(e)));super({entryID:e,revision:e,request:new Request(e),cacheBust:!1})}}class eu extends ec{constructor({entryID:e,revision:t,url:r,cacheBust:s}){if(void 0===s&&(s=!0),void 0===e&&(e=new URL(r,location).toString()),h.isType({revision:t},"string"),0===t.length)throw ei.createError("invalid-revisioned-entry",Error("Bad revision Parameter. It should be a string with at least one character: "+JSON.stringify(t)));if(h.isType({url:r},"string"),0===r.length)throw ei.createError("invalid-revisioned-entry",Error("Bad url Parameter. It should be a string:"+JSON.stringify(r)));if(h.isType({entryID:e},"string"),0===e.length)throw ei.createError("invalid-revisioned-entry",Error("Bad entryID Parameter. It should be a string with at least one character: "+JSON.stringify(e)));h.isType({cacheBust:s},"boolean"),super({entryID:e,revision:t,request:new Request(r),cacheBust:s})}}if(!k.isServiceWorkerGlobalScope())throw ei.createError("not-in-sw");return class e{constructor({cacheId:e,clientsClaim:r,handleFetch:s,directoryIndex:i="index.html",precacheChannelName:a="precache-updates",ignoreUrlParametersMatching:n=[/^utm_/]}={}){if(!k.isServiceWorkerGlobalScope())throw t.createError("not-in-sw");if(k.isDevBuild()&&(k.isLocalhost()?q.debug({message:"Welcome to Workbox!",data:{"\uD83D\uDCD6":"Read the guides and documentation\nhttps://googlechrome.github.io/workbox/","â“":"Use the [workbox] tag on StackOverflow to ask questions\nhttps://stackoverflow.com/questions/ask?tags=workbox","\uD83D\uDC1B":"Found a bug? Report it on GitHub\nhttps://github.com/GoogleChrome/workbox/issues/new"}}):q.warn(`This appears to be a production server. Please switch
          to the smaller, optimized production build of Workbox.`)),e&&("string"!=typeof e||0===e.length))throw t.createError("bad-cache-id");if(r&&"boolean"!=typeof r)throw t.createError("bad-clients-claim");if(void 0!==i){if(!1===i||null===i)i=!1;else if("string"!=typeof i||0===i.length)throw t.createError("bad-directory-index")}let o=[];a&&o.push(new es({channelName:a,source:registration&&registration.scope?registration.scope:location})),this._runtimeCacheName=R({cacheId:e}),this._revisionedCacheManager=new class e extends ea{constructor(e={}){e.cacheName=e.cacheName||eo,super(e),this._revisionDetailsModel=new class e{constructor(){this._idbHelper=new class e{constructor(e,t,r){if(void 0==e||void 0==t||void 0==r)throw Error("name, version, storeName must be passed to the constructor.");this._name=e,this._version=t,this._storeName=r}_getDb(){return this._dbPromise||(this._dbPromise=Y.open(this._name,this._version,e=>{e.createObjectStore(this._storeName)}).then(e=>e)),this._dbPromise}close(){if(this._dbPromise)return this._dbPromise.then(e=>{e.close(),this._dbPromise=null})}put(e,t){return this._getDb().then(r=>{let s=r.transaction(this._storeName,"readwrite"),i=s.objectStore(this._storeName);return i.put(t,e),s.complete})}delete(e){return this._getDb().then(t=>{let r=t.transaction(this._storeName,"readwrite"),s=r.objectStore(this._storeName);return s.delete(e),r.complete})}get(e){return this._getDb().then(t=>t.transaction(this._storeName).objectStore(this._storeName).get(e))}getAllValues(){return this._getDb().then(e=>e.transaction(this._storeName).objectStore(this._storeName).getAll())}getAllKeys(){return this._getDb().then(e=>e.transaction(this._storeName).objectStore(this._storeName).getAllKeys())}}("workbox-precaching","1","asset-revisions")}get(e){return this._idbHelper.get(e)}put(e,t){return this._idbHelper.put(e,t)}_close(){this._idbHelper.close()}}}addToCacheList({revisionedFiles:e}={}){h.isInstance({revisionedFiles:e},Array),super._addEntries(e);let t=e.filter(e=>"string"==typeof e);t.length>0&&q.debug({that:this,message:`Some precache entries are URLs without separate revision
          fields. If the URLs themselves do not contain revisioning info,
          like a hash or a version number, your users won't receive updates.`,data:{"URLs without revision fields":JSON.stringify(t),"Examples of safe, versioned URLs":"'/path/file.abcd1234.css' or '/v1.0.0/file.js'","Examples of dangerous, unversioned URLs":"'index.html' or '/path/file.css' or '/latest/file.js'"}})}_parseEntry(e){if(null==e)throw ei.createError("invalid-revisioned-entry",Error("Invalid file entry: "+JSON.stringify(e)));let t;switch(typeof e){case"string":t=new eh(e);break;case"object":t=new eu(e);break;default:throw ei.createError("invalid-revisioned-entry",Error("Invalid file entry: "+JSON.stringify(t)))}return t}_onDuplicateInstallEntryFound(e,t){if(t.revision!==e.revision)throw ei.createError("duplicate-entry-diff-revisions",Error(`${JSON.stringify(t)} <=> ${JSON.stringify(e)}`))}async _isAlreadyCached(e){let t=await this._revisionDetailsModel.get(e.entryID);if(t!==e.revision)return!1;let r=await this._getCache(),s=await r.match(e.request);return!!s}async _onEntryCached(e){await this._revisionDetailsModel.put(e.entryID,e.revision)}_close(){this._revisionDetailsModel._close()}cleanup(){return super.cleanup().then(()=>this._close())}}({cacheId:e,plugins:o}),this._strategies=new class e{constructor({cacheId:e}={}){this._cacheId=e}cacheFirst(e){return this._getCachingMechanism(M,e)}cacheOnly(e){return this._getCachingMechanism(j,e)}networkFirst(e){return this._getCachingMechanism(G,e)}networkOnly(e){return this._getCachingMechanism(V,e)}staleWhileRevalidate(e){return this._getCachingMechanism(B,e)}_getCachingMechanism(e,t={}){let r={cacheExpiration:Z,broadcastCacheUpdate:es,cacheableResponse:A},s={plugins:[],cacheId:this._cacheId};t.cacheName&&(s.cacheName=t.cacheName);let i=Object.keys(r);return i.forEach(e=>{if(t[e]){let i=r[e],a=t[e];s.plugins.push(new i(a))}}),t.plugins&&t.plugins.forEach(e=>{s.plugins.push(e)}),t.requestWrapper=new F(s),new e(t)}}({cacheId:e}),this._router=new class e extends S{constructor(e,t){super({handleFetch:t}),this._revisionedCacheName=e}registerRoute(e,r){if("function"==typeof r&&(r={handle:r}),"string"==typeof e){if(0===e.length)throw t.createError("empty-express-string");super.registerRoute({route:new C({path:e,handler:r})})}else if(e instanceof RegExp)super.registerRoute({route:new _({regExp:e,handler:r})});else if(e instanceof l)super.registerRoute({route:e});else throw t.createError("unsupported-route-type")}registerNavigationRoute(e,r={}){if("string"!=typeof e)throw t.createError("navigation-route-url-string");let s="cacheName"in r?r.cacheName:this._revisionedCacheName;super.registerRoute({route:new O({handler:()=>caches.match(e,{cacheName:s}),whitelist:r.whitelist||[/./],blacklist:r.blacklist||[]})})}}(this._revisionedCacheManager.getCacheName(),s),this._registerInstallActivateEvents(r),this._registerDefaultRoutes(n,i)}precache(e){if(!Array.isArray(e))throw t.createError("bad-revisioned-cache-list");this._revisionedCacheManager.addToCacheList({revisionedFiles:e})}get router(){return this._router}get strategies(){return this._strategies}get runtimeCacheName(){return this._runtimeCacheName}_registerInstallActivateEvents(e){self.addEventListener("install",e=>{let t=this._revisionedCacheManager.getCachedUrls();t.length>0&&q.debug({that:this,message:`The precached URLs will automatically be served using a
            cache-first strategy.`,data:{"Precached URLs":JSON.stringify(t)}}),e.waitUntil(this._revisionedCacheManager.install())}),self.addEventListener("activate",t=>{t.waitUntil(this._revisionedCacheManager.cleanup().then(()=>{if(e)return self.clients.claim()}))})}_registerDefaultRoutes(e,t){let r=[];(e||t)&&r.push(this._getCacheMatchPlugin(e,t));let s=this.strategies.cacheFirst({cacheName:this._revisionedCacheManager.getCacheName(),plugins:r}),i=new l({match:({url:r})=>{let s=this._revisionedCacheManager.getCachedUrls();if(-1!==s.indexOf(r.href))return!0;let i=this._removeIgnoreUrlParams(r.href,e);return -1!==s.indexOf(i.href)||!!(t&&i.pathname.endsWith("/"))&&(r.pathname+=t,-1!==s.indexOf(r.href))},handler:s});this.router.registerRoute(i)}_getCacheMatchPlugin(e,t){let r=async({request:r,cache:s,cachedResponse:i,matchOptions:a})=>{if(i)return i;let n=this._removeIgnoreUrlParams(r.url,e);return s.match(n.toString(),a).then(e=>!e&&n.pathname.endsWith("/")?(n.pathname+=t,s.match(n.toString(),a)):e)};return{cacheWillMatch:r}}_removeIgnoreUrlParams(e,t){let r=new URL(e),s=r.search.slice(1),i=s.split("&"),a=i.map(e=>e.split("=")),n=a.filter(e=>t.every(t=>!t.test(e[0]))),o=n.map(e=>e.join("="));return r.search=o.join("&"),r}}}();